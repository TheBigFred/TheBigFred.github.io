
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow">

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://thebigfred.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://thebigfred.github.io/theme/pygments/monokai.min.css">
  <link rel="stylesheet" type="text/css" href="https://thebigfred.github.io/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://thebigfred.github.io/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://thebigfred.github.io/theme/font-awesome/css/solid.css">


    <link href="https://thebigfred.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="fgeDoc's Atom">




    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#333333">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#333333">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#333333">

<meta name="author" content="FGE">
<meta name="description" content="En finir avec son clavier mal configuré">
<meta name="keywords" content="Xorg">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<meta property="og:site_name" content="fgeDoc's"/>
<meta property="og:title" content="Xorg - configuration du clavier"/>
<meta property="og:description" content="En finir avec son clavier mal configuré"/>
<meta property="og:locale" content="fr_BE"/>
<meta property="og:url" content="https://thebigfred.github.io/xorg-configuration-du-clavier.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2010-12-03 10:20:00+01:00"/>
<meta property="article:modified_time" content="2018-05-02 06:34:00+02:00"/>
<meta property="article:author" content="https://thebigfred.github.io/author/fge.html">
<meta property="article:section" content="linux"/>
<meta property="article:tag" content="Xorg"/>
<meta property="og:image" content="">

  <title>fgeDoc's &ndash; Xorg - configuration du clavier</title>

</head>
<body>
  <aside>
    <div>
      <h1><a href="https://thebigfred.github.io/index.html">FGE Doc's</a></h1>

<p>Sharing notes</p>      <nav>
        <h2>
          <a href="https://thebigfred.github.io/index.html">
            <span class="fa fa-home"></span>
            <small> Home</small>
          </a>
        </h2>
        <ul class="list">
        </ul>
      </nav>
      <nav>
        <h2>
          <a href="https://thebigfred.github.io/categories.html">
            <span class="fa fa-folder-open"></span>
            <small> Catégories</small>
          </a>
        </h2>
	      <ul class="list">
          <li><a href="https://thebigfred.github.io/category/devtools.html">devtools (5)</a></li>
          <li><a href="https://thebigfred.github.io/category/linux.html">linux (4)</a></li>
        </ul>
      </nav>
      <nav>
        <h2>
          <a href="https://thebigfred.github.io/tags.html">
            <span class="fa fa-tags"></span>
            <small> Tags</small>
          </a>
        </h2>
        <ul class="list">          <li><a href="https://thebigfred.github.io/tag/cmd-line.html">cmd-line (6)</a></li>
          <li><a href="https://thebigfred.github.io/tag/gnu-tools.html">GNU-Tools (5)</a></li>
          <li><a href="https://thebigfred.github.io/tag/xfce4.html">XFCE4 (1)</a></li>
          <li><a href="https://thebigfred.github.io/tag/xorg.html">Xorg (2)</a></li>
        </ul>
      </nav>
      <ul class="social">
          <li>
            <a  class="sc-linkedin" href="https://be.linkedin.com/in/frederic-gerard-32092754" target="_blank">
            <i class="fab fa-linkedin">
            </i>
          </a></li>
          <li>
            <a  class="sc-rss" href="https://thebigfred.github.io/feeds/all.atom.xml" target="_blank">
            <i class="fas fa-rss">
            </i>
          </a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="https://thebigfred.github.io/index.html"><span class="fa fa-home"> Home</a>
  - <span class="fa fa-folder-open-o" ></span> linux
      <hr>
    </nav>

<article class="single">
  <header>
      
    <h1 id="xorg-configuration-du-clavier">Xorg - configuration du clavier</h1>
    <p>
      Posté le ven 03 décembre 2010 dans <a href="https://thebigfred.github.io/category/linux.html">linux</a>

    </p>
  </header>

  <div>
    <p>Lors de son démarrage, xorg scrute une liste de dossiers dans un ordre déterminé, à la recherche d'un fichier <em>xorg.conf</em> ou de fichiers .conf dans un dossier nommé <em>xorg.conf.d</em>. Le dossier <em>xorg.conf.d</em> permet simplement de découper la configuration en plusieurs fichiers.</p>
<p>Notez que si vous utilisez le fichier <em>xorg.conf</em>, le dossier <em>xorg.cond.d</em> est simplement ignoré et que, dès lors le fichier <em>xorg.conf</em> doit contenir la totalité de la configuration.</p>
<p>La liste de dossiers scrutés par xorg est généralement :</p>
<ul>
<li>/etc/X11/xorg.conf</li>
<li>/etc/X11/xorg.conf.d/…</li>
<li>/usr/share/X11/xorg.conf</li>
<li>/usr/share/X11/xorg.conf.d/…</li>
</ul>
<p>Il est fort probable de ne rien trouver dans /etc/X11, qui est là pour vous permettre de modifier la configuration sans toucher aux fichiers d'origines. Il suffit alors de recopier (avec sudo) le fichier que vous souhaitez modifier depuis <em>/usr/share/X11/…</em> vers <em>/etc/X11/…</em></p>
<h2 id="modifier-le-clavier">Modifier le clavier</h2>
<!--
Généralement je ne modifie que le fichier 10-evdev.conf pour configurer correctement mon clavier.

Sous Archlinux

        sudo mkdir -p /etc/X11/xorg.conf.d
        sudo cp /usr/share/xorg.conf.d/10-evdev.conf /etc/X11/xorg.conf.d

    Dans ce fichier, je cherche le code suivant :

        Section "InputClass"
            Identifier      "evdev keyboard catchall"
            MatchIsKeyboard "on"
            MatchDevicePath "/dev/input/event*"
            Driver          "evdev"
        EndSection
-->

<p>Sous Archlinux, je crée dans <em>/etc/X11/xorg.conf.d</em> un fichier nommé <em>10-keyboard-layout.conf</em>, avec le code suivant:</p>
<pre><code>Section "InputClass"
        Identifier      "keyboard Layout"
        MatchIsKeyboard "on"
EndSection
</code></pre>
<p>Pour un clavier belge, j'ajoute après la ligne driver :</p>
<pre><code>Option "XkbLayout" "be"
</code></pre>
<p>Pour un clavier mac, j'ajoute :</p>
<pre><code>Option "XkbLayout" "fr"
Option "XkbVariant" "mac"
</code></pre>
<p>Sous Debian, il est conseillé de modifier le fichier <em>/etc/default/keyboard</em> et d'utiliser la commande <code>dpkg-reconfigure keyboard-configuration</code>, à exécuter en <em>sudo</em>. Celle-ci lance un utilitaire de configuration qui modifiera le fichier de configuration de xorg pour vous.</p>
<h2 id="modifier-temporairement-le-clavier">Modifier temporairement le clavier</h2>
<p>Il est également possible de modifier le clavier temporairement - jusqu'à la prochaine déconnexion de l'interface graphique - en utilisant la commande <code>setxkbmap</code> :</p>
<pre><code>setxkbmap -layout "fr" -variant "mac"
</code></pre>
<h2 id="corriger-les-touches-qui-deconnent">Corriger les touches qui déconnent</h2>
<p>Si comme moi les touches @ et &lt; sont inversées sur votre clavier mac, il est possible de corriger le mapping clavier.</p>
<p>La commande <code>xev</code> (à lancer dans un terminal) permet de connaître le keycode des touches. Elle affiche le contenu de chaque événement capté par l'interface graphique. Le moindre mouvement de souris, pression ou relâchement de touche génère un événement.</p>
<pre><code>xev
...
KeyPress event, serial 37, synthetic NO, window 0x3200001,
    root 0x165, subw 0x0, time 3927162, (163,-10), root:(474,228),
    state 0x10, keycode 94 (keysym 0x3c, less), same_screen YES,
    XLookupString gives 1 bytes: (3c) "&lt;"
    XmbLookupString gives 1 bytes: (3c) "&lt;"
    XFilterEvent returns: False

KeyPress event, serial 37, synthetic NO, window 0x3200001,
    root 0x165, subw 0x0, time 3927914, (163,-10), root:(474,228),
    state 0x10, keycode 49 (keysym 0x40, at), same_screen YES,
    XLookupString gives 1 bytes: (40) "@"
    XmbLookupString gives 1 bytes: (40) "@"
    XFilterEvent returns: False
</code></pre>
<p>La touche @ correspond au keycode 94 et la touche &lt; correspond au keycode 49.
L'inverse de ce que le message précédent nous indique.</p>
<p>La commande <code>xmodmap -pke</code> affiche le mapping du clavier. Les commandes suivantes permettent d'extraire uniquement les lignes qui nous intéressent et de les placer directement dans le fichier <em>.Xmodmap</em>  (situé à la racine de votre dossier personnel).</p>
<p>Noter qu'il y a deux espaces entre keycode et le nombre.</p>
<pre><code> xmodmap -pke | grep 'keycode  49 =' &gt;&gt; ~/.Xmodmap
 xmodmap -pke | grep 'keycode  94 =' &gt;&gt; ~/.Xmodmap
</code></pre>
<p>Éditer le fichier <em>~/.Xmodmap</em>, vous devriez avoir ceci à la fin du fichier :</p>
<pre><code>keycode 49 = at numbersign at numbersign periodcentered ...
keycode 94 = less greater less greater VoidSymbol ...
</code></pre>
<p>Il reste à intervertir le 49 et le 94 comme suit :</p>
<pre><code>keycode 94 = at numbersign at numbersign periodcentered ...
keycode 49 = less greater less greater VoidSymbol ...
</code></pre>
<p>Pour prendre en compte cette modification, il faut quitter sa session graphique.</p>
<p>Chaque utilisateur devra copier ce fichier dans son dossier personnel. L'idéal est d'en placer une copie dans le dossier <em>/etc/skel</em>, de cette manière, à chaque création d'un nouvel utilisateur, ce fichier sera copié.</p>
  </div>
  <header><p>
  </p></header>
  <div class="tag-cloud">
    <p>
      <span class="fa fa-tags" ></span> 
      <a href="https://thebigfred.github.io/tag/xorg.html">Xorg</a>
    </p>
  </div>





<!-- gittalk -->
<div id="gitalk-container"></div>
<script type="text/javascript">
	const gitalk = new Gitalk({
		clientID: 'ff500cd58d3176eccb54',
		clientSecret: 'c5f7d6a38b1cc73dea3b02a075e8630eaad15617',
		repo: 'comments',      // The repository of store comments,
		owner: 'TheBigFred',
		admin: ['TheBigFred'],
		id: 'Xorg - configuration du clavier',      // Ensure uniqueness and length less than 50
		distractionFreeMode: false  // Facebook-like distraction free mode
	})

	gitalk.render('gitalk-container')
</script>
<noscript>
    Veuillez activer le JavaScript pour voir les commentaires.
</noscript>
<!-- End gittalk -->
</article>

    <footer>
<p>
  &copy; FGE 2016 - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>Propulsé par <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> thème par <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a></p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " fgeDoc's ",
  "url" : "https://thebigfred.github.io",
  "image": "",
  "description": "FGE's Thoughts and Writings"
}
</script>

</body>
</html>